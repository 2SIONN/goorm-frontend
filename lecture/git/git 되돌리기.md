# git 되돌리기

날짜: 2025년 7월 21일

## ✅ 1️⃣ `git reset` : 히스토리를 삭제하며 되돌리는 명령어

### 🎯 사용목적

- 커밋ID ⭕️ : 커밋 자체를 취소하거나 삭제
- 커밋ID ❌ : git add로 올린 파일을 스테이지에서 해제

### 🛠️ 사용법

```bash
git reset --soft 커밋ID     # 커밋만 취소 (코드 유지)
git reset --mixed 커밋ID    # 커밋 + 스테이징 취소 (코드 유지)
git reset --hard 커밋ID     # 모든 것 삭제 후 해당 커밋 상태로 되돌림

```

### 📌 주요 차이

| 옵션 | 커밋 기록 | 스테이징 | 작업 디렉토리 (코드) |
| --- | --- | --- | --- |
| `--soft` | 되돌림 | 유지 | 유지 |
| `--mixed` | 되돌림 | 초기화 | 유지 |
| `--hard` | 되돌림 | 초기화 | **삭제** |

⚠️ `--hard`는 복구 불가. 신중히 사용!

---

## ✅ 2️⃣ `git restore` : 작업 파일 변경만 되돌리는 명령어

### 🎯 사용목적

- 수정 중인 파일을 커밋된 상태로 되돌림
- git add로 올린 것을 취소

### 🛠️ 사용법

```bash
git restore 파일명             # 작업 중인 파일 되돌리기
git restore --staged 파일명    # 스테이징 취소 (git add 해제)

```

### 📌 특징

- 커밋 기록은 유지됨
- 파일 작업 내용만 되돌림
- 안전하게 사용할 수 있음

---

## ✅ 3️⃣ `git revert` : 되돌리는 커밋을 만드는 명령어

> 과거 커밋을 취소하고 싶지만, 기록은 유지하고 싶을 때
> 

### 🎯 사용목적

- 과거 커밋을 취소하되, 히스토리는 남기고 싶을 때
- 협업 중에 안전하게 커밋 취소

### 🛠️ 사용법

```bash
git revert 커밋ID

```

- 해당 커밋의 "반대 작업"을 적용한 **새로운 커밋**을 생성
- 히스토리 보존 (협업 시 권장)

---

## 📊 3가지 차이점 비교

| 비교항목 | git reset | git restore | git revert |
| --- | --- | --- | --- |
| 작동 대상 | 커밋 / 스테이지 / 코드 | 파일 작업 / 스테이지 파일 | 특정 커밋 내용 |
| 커밋 기록 삭제 여부 | 삭제 | 유지 | 유지 (되돌리는 커밋 생성) |
| 작업 파일 영향 | 옵션에 따라 삭제 가능 | 수정 파일만 복구 | 되돌리는 커밋 생성 |
| 협업에서 사용 추천 | ❌ (로컬에서 사용) | ✅ | ✅ (협업에서 권장) |
| 위험도 | 높음 (`--hard` 위험) | 매우 낮음 | 매우 낮음 |

---

## 📌 상황별 추천

| 상황 | 추천 명령어 |
| --- | --- |
| 최근 커밋 자체를 삭제하고 싶을 때 | `git reset` |
| 파일을 실수로 수정해서 되돌리고 싶을 때 | `git restore` |
| 협업 중 과거 커밋을 취소하고 싶을 때 | `git revert` |

---

## 🎯 실전 예시

### 최근 커밋 삭제하기 (`reset`)

```bash
git reset --hard HEAD~1

```

### 수정한 파일 되돌리기 (`restore`)

```bash
git restore hello.txt

```

### 과거 커밋 취소하기 (`revert`)

```bash
git revert abc1234

```

---

## ⚡ 핵심 요약

- ❗ **`git reset --hard`는 주의!** → 커밋+파일 삭제
- ✅ 협업 중에는 **`git revert` 사용 권장**
- 🛡️ 코드만 되돌리고 싶다면 **`git restore`**