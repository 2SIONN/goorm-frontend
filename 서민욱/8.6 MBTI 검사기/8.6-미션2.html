<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>MBTI ê²€ì‚¬</title>
    <style>
        body {
        max-width: 700px;
        margin: 40px auto;
        padding: 20px;
        }

        h1 {
        text-align: center;
        margin-bottom: 40px;
        }

        .question {
        background: #f9f9f9;
        padding: 20px;
        margin-bottom: 25px;
        border: 1px solid #ddd;
        border-radius: 10px;
        }

        .question p {
        font-size: 18px;
        margin-bottom: 15px;
        }

        .options {
        display: flex;
        gap: 20px;
        justify-content: center;
        }

        .option {
        display: inline-block;
        }

        input[type="radio"] {
        display: none;
        }

        label {
        display: inline-block;
        padding: 12px 24px;
        background-color: #a957c2;
        color: white;
        border-radius: 8px;
        cursor: pointer;
        user-select: none;
        }

        input[type="radio"]:checked+label {
        background-color: #e03f65;
        }

        #result {
        margin: 40px 0;
        font-size: 20px;
        text-align: center;
        font-weight: bold;
        }
  </style>
</head>

<body>

  <h1>ðŸ§  MBTI ê°„ë‹¨ ê²€ì‚¬</h1>
  <div id="result"></div>
  <div id="quiz"></div>

  <script>
    const questions = {
      q1: { text: "ì¹œêµ¬ê°€ ê°‘ìžê¸° ë‚˜ì™€ì„œ ë³´ìž í•´ë„ ìƒê´€ ì—†ë‚˜ìš”?", a: "E", b: "I" },  // EI
      q2: { text: "ì–´ë– í•œ ë¬¼ì²´ë¥¼ ë³´ë©´ ì—¬ëŸ¬ ê°€ì§€ ìƒê°ë¥¼ í•˜ë‚˜ìš”?", a: "N", b: "S" },   // NS
      q3: { text: "ì´ì„±ì´ ê°ì •ë³´ë‹¤ ë¨¼ì € ì•žì„œëŠ” íŽ¸ì¸ê°€ìš”?", a: "T", b: "F" },        // TF
      q4: { text: "í‰ì†Œì— ê³„íšì„ ìž˜ ì§œëŠ” íŽ¸ì¸ê°€ìš”?", a: "J", b: "P" }     // JP
    };

    const answers = {}; // ì‚¬ìš©ìžì˜ ì‘ë‹µì„ ì €ìž¥í•  ê°ì²´

    // ê° MBTI í•­ëª© ì„ íƒ ì‹œ ì ìˆ˜ ì¦ê°€ (í•­ëª©ì´ ë§Žì•„ì§ˆ ê²½ìš° ìœ ìš©!)
    const score = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

    const quizEl = document.getElementById("quiz");
    const resultEl = document.getElementById("result");

    const renderQuestions = function() {
        Object.entries(questions).forEach(([key, value], index) => {
            const container = document.createElement("div");
            container.className = "question";
            container.innerHTML = `
                <p>${index + 1}. ${value.text}</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="${key}_a" name="${key}" value="${value.a}">
                        <label for="${key}_a">ë„¤</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="${key}_b" name="${key}" value="${value.b}">
                        <label for="${key}_b">ì•„ë‹ˆì˜¤</label>
                    </div>
                </div>
                `;
            quizEl.appendChild(container);

            container.querySelectorAll('input[type="radio"]').forEach(input => {
                input.addEventListener('change', (e) => {
                    answers[key] = input.value;

                    if (Object.keys(answers).length == Object.keys(questions).length) {
                        showResult(); // ì„œë¡œì˜ key ê°œìˆ˜ ë¹„êµ í›„ ê°™ìœ¼ë©´, ë‹¤ í•œê±°ë‹ˆê¹Œ ê²°ê³¼ ë³´ì—¬ì£¼ê¸°.
                    }
                    
                });
            });
        });
    }

    const showResult = function() {
        Object.values(answers).forEach(type => {
            score[type]++;
        });
        const entries = Object.entries(score); 
        const myAnswer = Object.fromEntries(entries); // êµ³ì´???
        const mbti = 
            (myAnswer.E > myAnswer.I ? "E" : "I") +
            (myAnswer.N > myAnswer.S ? "N" : "S") +
            (myAnswer.T > myAnswer.F ? "T" : "F") +
            (myAnswer.J > myAnswer.P ? "J" : "P");

        resultEl.innerHTML = (`ë‹¹ì‹ ì˜ MBTIëŠ” ${mbti}ìž…ë‹ˆë‹¤.`);
        
        removeResult();
    }

    const removeResult = function() {
        Object.values(answers).forEach(type => {
            score[type] = 0; // ë‹¤ì‹œ ì´ˆê¸°í™”
        });

         setTimeout(() => {
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });

        // ì•¤ì„œê°’ ë¹„ì›Œë²„ë¦¬ê¸°
            for (let key in answers) {
                delete answers[key];
            }
        }, 3000);
    }
    renderQuestions();
  </script>

</body>

</html>